
[build]
  publish = "."
  command = "echo 'No build command needed - static site'"

[build.environment]
  NODE_VERSION = "18"
  NPM_VERSION = "9"

# Security Headers
[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    X-XSS-Protection = "1; mode=block"
    X-Content-Type-Options = "nosniff"
    Referrer-Policy = "strict-origin-when-cross-origin"
    Permissions-Policy = "camera=(), microphone=(), geolocation=(), payment=(), usb=(), magnetometer=(), gyroscope=(), accelerometer=(), ambient-light-sensor=(), autoplay=(), encrypted-media=(), fullscreen=(), picture-in-picture=(), publickey-credentials-get=(), screen-wake-lock=(), sync-xhr=(), web-share=(), xr-spatial-tracking=()"
    Strict-Transport-Security = "max-age=31536000; includeSubDomains; preload"
    Cross-Origin-Embedder-Policy = "require-corp"
    Cross-Origin-Opener-Policy = "same-origin"
    Cross-Origin-Resource-Policy = "same-origin"
    Origin-Agent-Cluster = "?1"
    Content-Security-Policy = "default-src 'self' https: data: blob:; script-src 'self' 'unsafe-eval' 'unsafe-inline' https: data: blob:; style-src 'self' 'unsafe-inline' https: data: blob:; font-src 'self' https: data: blob:; img-src 'self' data: https: blob:; connect-src 'self' https: wss: ws:; frame-src 'self' https:; worker-src 'self' blob:; object-src 'none'; base-uri 'self'; form-action 'self'; upgrade-insecure-requests;"

# Cache Control for Static Assets
[[headers]]
  for = "*.js"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "*.css"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "*.png"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "*.jpg"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "*.svg"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "*.ico"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "*.woff"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "*.woff2"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

# HTML files - no cache for dynamic content
[[headers]]
  for = "*.html"
  [headers.values]
    Cache-Control = "public, max-age=0, must-revalidate"

# Manifest and Service Worker - no cache
[[headers]]
  for = "manifest.json"
  [headers.values]
    Cache-Control = "public, max-age=0, must-revalidate"

[[headers]]
  for = "sw.js"
  [headers.values]
    Cache-Control = "public, max-age=0, must-revalidate"

# Redirects
[[redirects]]
  from = "/app"
  to = "/app.html"
  status = 200

[[redirects]]
  from = "/press"
  to = "/press-release.html"
  status = 200

[[redirects]]
  from = "/mvp"
  to = "/MVP Launch Page.html"
  status = 200

# Functions
[functions]
  directory = "netlify/functions"

# Environment Variables (set these in Netlify dashboard)
[context.production.environment]
  NODE_ENV = "production"
  # FIREBASE_API_KEY = "your_firebase_api_key_here"
  # FIREBASE_AUTH_DOMAIN = "your_project.firebaseapp.com"
  # FIREBASE_PROJECT_ID = "your_project_id"
  # FIREBASE_STORAGE_BUCKET = "your_project.appspot.com"
  # FIREBASE_MESSAGING_SENDER_ID = "your_sender_id"
  # FIREBASE_APP_ID = "your_app_id"
  # FIREBASE_MEASUREMENT_ID = "your_measurement_id"

[context.deploy-preview.environment]
  NODE_ENV = "preview"

[context.branch-deploy.environment]
  NODE_ENV = "development"

# Build Hooks (optional)
# [build.hooks]
#   pre_build = "npm run prebuild"
#   post_build = "npm run postbuild"

# Edge Functions (optional)
# [[edge_functions]]
#   function = "edge-function"
#   path = "/api/*"
